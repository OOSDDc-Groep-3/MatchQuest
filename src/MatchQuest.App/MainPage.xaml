<?xml version="1.0" encoding="utf-8" ?>

<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MatchQuest.App.MainPage"
             BackgroundImageSource="background.png"
             BackgroundColor="Transparent">

    <ContentPage.Resources>
        <ResourceDictionary>
            <!-- Colors -->
            <Color x:Key="AccentColor">#C0ffee</Color>
            <Color x:Key="OverlayColor">#CC2F2F2F</Color>
            <Color x:Key="SecondaryText">#DADADA</Color>
            <Color x:Key="TimestampColor">#B0B0B0</Color>
            <Color x:Key="CardStroke">#A4D5C7</Color>

            <!-- Sizes -->
            <x:Double x:Key="AvatarSize">48</x:Double>
            <x:Double x:Key="AvatarRadius">24</x:Double>

            <!-- Styles -->
            <Style x:Key="SeparatorStyle" TargetType="BoxView">
                <Setter Property="HeightRequest" Value="1" />
                <Setter Property="BackgroundColor" Value="{StaticResource AccentColor}" />
                <Setter Property="HorizontalOptions" Value="Fill" />
                <Setter Property="Margin" Value="0,6,6,0" />
            </Style>

            <Style x:Key="ContactBorderStyle" TargetType="Border">
                <Setter Property="Margin" Value="0,6,0,0" />
                <Setter Property="Padding" Value="8" />
                <Setter Property="BackgroundColor" Value="Transparent" />
                <Setter Property="StrokeThickness" Value="0" />
            </Style>

            <Style x:Key="NameLabelStyle" TargetType="Label">
                <Setter Property="FontSize" Value="16" />
                <Setter Property="FontAttributes" Value="Bold" />
                <Setter Property="TextColor" Value="{StaticResource AccentColor}" />
            </Style>

            <Style x:Key="PreviewLabelStyle" TargetType="Label">
                <Setter Property="FontSize" Value="13" />
                <Setter Property="TextColor" Value="{StaticResource SecondaryText}" />
                <Setter Property="LineBreakMode" Value="TailTruncation" />
                <Setter Property="MaxLines" Value="1" />
            </Style>

            <Style x:Key="TimestampLabelStyle" TargetType="Label">
                <Setter Property="FontSize" Value="11" />
                <Setter Property="TextColor" Value="{StaticResource TimestampColor}" />
                <Setter Property="HorizontalOptions" Value="End" />
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid RowDefinitions="*" ColumnDefinitions="0.4*,0.8*">

        <!-- Semi-opaque dark overlay -->
        <BoxView Grid.Column="0"
                 Grid.ColumnSpan="2"
                 Color="{StaticResource OverlayColor}"
                 HorizontalOptions="Fill"
                 VerticalOptions="Fill"
                 InputTransparent="True" />

        <!-- Left: Matches list (sidebar) -->
        <Border Grid.Column="0"
                Margin="0"
                BackgroundColor="Transparent"
                Stroke="{StaticResource AccentColor}"
                StrokeThickness="2">
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="0" />
            </Border.StrokeShape>

            <VerticalStackLayout Padding="8" Spacing="0">

                <!-- Header -->
                <HorizontalStackLayout Margin="0,6,0,6" Spacing="8" VerticalOptions="Center">
                    <Image Source="matchquest.png" WidthRequest="80" HeightRequest="80" />
                    <Label Text="Matches"
                           FontSize="28"
                           FontAttributes="Bold"
                           TextColor="{StaticResource AccentColor}"
                           VerticalOptions="Center" />
                </HorizontalStackLayout>

                <!-- Scrollable list -->
                <ScrollView>
                    <VerticalStackLayout Padding="0" Spacing="0">

                        <!-- Contact: Kees -->
                        <BoxView Style="{StaticResource SeparatorStyle}" Margin="0,0,6,0" />
                        <Border x:Name="KeesButton" Style="{StaticResource ContactBorderStyle}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding OpenMatchCommand}" CommandParameter="Kees" NumberOfTapsRequired="1" />
                            </Border.GestureRecognizers>

                            <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto">
                                <!-- Avatar -->
                                <Image Grid.Column="0"
                                       Source="showcaseprofile.png"
                                       WidthRequest="{StaticResource AvatarSize}"
                                       HeightRequest="{StaticResource AvatarSize}"
                                       Aspect="AspectFill"
                                       VerticalOptions="Center">
                                    <Image.Clip>
                                        <EllipseGeometry Center="24,24" RadiusX="{StaticResource AvatarRadius}" RadiusY="{StaticResource AvatarRadius}" />
                                    </Image.Clip>
                                </Image>

                                <!-- Name and preview -->
                                <VerticalStackLayout Grid.Column="1" Spacing="2" Padding="8,0">
                                    <Label Text="Kees" Style="{StaticResource NameLabelStyle}" />
                                    <Label Text="Looking forward to play..." Style="{StaticResource PreviewLabelStyle}" />
                                </VerticalStackLayout>

                                <!-- Time and status -->
                                <VerticalStackLayout Grid.Column="2" Spacing="6" VerticalOptions="Center" HorizontalOptions="End">
                                    <Label Text="11:42" Style="{StaticResource TimestampLabelStyle}" />
                                    <HorizontalStackLayout Spacing="6" HorizontalOptions="End">
                                        <Border WidthRequest="20" HeightRequest="20" Padding="0" BackgroundColor="{StaticResource AccentColor}" Stroke="#232A34" StrokeThickness="1" HorizontalOptions="Center" VerticalOptions="Center">
                                            <Border.StrokeShape>
                                                <RoundRectangle CornerRadius="10" />
                                            </Border.StrokeShape>
                                            <Label Text="3" FontSize="11" TextColor="Black" HorizontalOptions="Center" VerticalOptions="Center" />
                                        </Border>
                                        <Image Source="messagedelivered.png" WidthRequest="16" HeightRequest="16" VerticalOptions="Center" HorizontalOptions="Center" BackgroundColor="#C0ffee" />
                                    </HorizontalStackLayout>
                                </VerticalStackLayout>
                            </Grid>
                        </Border>

                        <BoxView Style="{StaticResource SeparatorStyle}" />

                        <!-- Contact: Juan -->
                        <Border Style="{StaticResource ContactBorderStyle}">
                            <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto">
                                <Image Grid.Column="0"
                                       Source="showcaseprofile.png"
                                       WidthRequest="{StaticResource AvatarSize}"
                                       HeightRequest="{StaticResource AvatarSize}"
                                       Aspect="AspectFill"
                                       >
                                    <Image.Clip>
                                        <EllipseGeometry Center="24,24" RadiusX="{StaticResource AvatarRadius}" RadiusY="{StaticResource AvatarRadius}" />
                                    </Image.Clip>
                                </Image>

                                <VerticalStackLayout Grid.Column="1" Spacing="2" Padding="8,0">
                                    <Label Text="Juan" Style="{StaticResource NameLabelStyle}" />
                                    <Label Text="You've changed my life!" Style="{StaticResource PreviewLabelStyle}" />
                                </VerticalStackLayout>

                                <VerticalStackLayout Grid.Column="2" Spacing="6" VerticalOptions="Center" HorizontalOptions="End">
                                    <Label Text="09:18" Style="{StaticResource TimestampLabelStyle}" />
                                    <HorizontalStackLayout Spacing="6" HorizontalOptions="End">
                                        <Border WidthRequest="20" HeightRequest="20" Padding="0" BackgroundColor="{StaticResource AccentColor}" Stroke="#232A34" StrokeThickness="1" HorizontalOptions="Center" VerticalOptions="Center">
                                            <Border.StrokeShape>
                                                <RoundRectangle CornerRadius="10" />
                                            </Border.StrokeShape>
                                            <Label Text="1" FontSize="11" TextColor="Black" HorizontalOptions="Center" VerticalOptions="Center" />
                                        </Border>
                                        <Image Source="messageseen.png" WidthRequest="16" HeightRequest="16" VerticalOptions="Center" HorizontalOptions="Center" BackgroundColor="#C0ffee" />
                                    </HorizontalStackLayout>
                                </VerticalStackLayout>
                            </Grid>
                        </Border>

                        <BoxView Style="{StaticResource SeparatorStyle}" />

                        <!-- Contact: Britney -->
                        <Border Style="{StaticResource ContactBorderStyle}">
                            <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto">
                                <Image Grid.Column="0"
                                       Source="showcaseprofile.png"
                                       WidthRequest="{StaticResource AvatarSize}"
                                       HeightRequest="{StaticResource AvatarSize}"
                                       Aspect="AspectFill"
                                       >
                                    <Image.Clip>
                                        <EllipseGeometry Center="24,24" RadiusX="{StaticResource AvatarRadius}" RadiusY="{StaticResource AvatarRadius}" />
                                    </Image.Clip>
                                </Image>

                                <VerticalStackLayout Grid.Column="1" Spacing="2" Padding="8,0">
                                    <Label Text="Britney" Style="{StaticResource NameLabelStyle}" />
                                    <Label Text="Hey! Do you have OF?" Style="{StaticResource PreviewLabelStyle}" />
                                    <Label Text="Britney closed the chat" FontSize="10" TextColor="PaleVioletRed" FontAttributes="Bold"/>
                                </VerticalStackLayout>

                                <VerticalStackLayout Grid.Column="2" Spacing="6" VerticalOptions="Center" HorizontalOptions="End">
                                    <Label Text="Yesterday" Style="{StaticResource TimestampLabelStyle}" />
                                    <HorizontalStackLayout Spacing="6" HorizontalOptions="End">
                                        <Border WidthRequest="20" HeightRequest="20" Padding="0" BackgroundColor="{StaticResource AccentColor}" Stroke="#232A34" StrokeThickness="1" HorizontalOptions="Center" VerticalOptions="Center">
                                            <Border.StrokeShape>
                                                <RoundRectangle CornerRadius="10" />
                                            </Border.StrokeShape>
                                            <Label Text="1" FontSize="11" TextColor="Black" HorizontalOptions="Center" VerticalOptions="Center" />
                                        </Border>
                                        <Image Source="messagesent.png" WidthRequest="16" HeightRequest="16" VerticalOptions="Center" HorizontalOptions="Center" BackgroundColor="#C0ffee" />
                                    </HorizontalStackLayout>
                                </VerticalStackLayout>
                            </Grid>
                        </Border>

                        <BoxView Style="{StaticResource SeparatorStyle}" />

                    </VerticalStackLayout>
                </ScrollView>

            </VerticalStackLayout>
        </Border>

        <!-- Right column: Profile Card (unchanged structure, tightened spacing where helpful) -->
        <Border Grid.Column="1"
                Margin="0"
                Stroke="{StaticResource AccentColor}"
                StrokeThickness="2"
                BackgroundColor="Transparent">
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="0" />
            </Border.StrokeShape>

            <Grid>
                <HorizontalStackLayout Spacing="18" HorizontalOptions="End" Padding="20" VerticalOptions="Start">
                    <Picker x:Name="MyMatchesFilter" Title="Suggested Match Filter" TitleColor="{StaticResource AccentColor}" SelectedIndex="0" BackgroundColor="#192126" WidthRequest="220">
                        <Picker.Items>
                            <x:String>All Matches</x:String>
                            <x:String>New</x:String>
                            <x:String>Favorites</x:String>
                            <x:String>Nearby</x:String>
                            <x:String>Action</x:String>
                            <x:String>Adventure</x:String>
                            <x:String>Action-adventure</x:String>
                            <x:String>Role-playing (RPG)</x:String>
                            <x:String>Shooter (FPS / TPS)</x:String>
                            <x:String>Fighting</x:String>
                            <x:String>Platformer</x:String>
                            <x:String>Strategy (RTS, turn-based, 4X)</x:String>
                            <x:String>Simulation</x:String>
                            <x:String>Sports</x:String>
                            <x:String>Racing</x:String>
                            <x:String>Puzzle</x:String>
                            <x:String>Stealth</x:String>
                            <x:String>Survival</x:String>
                            <x:String>Horror</x:String>
                            <x:String>Sandbox / Open-world</x:String>
                            <x:String>Massively Multiplayer Online (MMO / MMORPG)</x:String>
                            <x:String>Battle Royale</x:String>
                            <x:String>Party / Casual</x:String>
                        </Picker.Items>
                    </Picker>

                    <ImageButton x:Name="SettingsButton"
                                 Source="settings.png"
                                 BackgroundColor="{StaticResource AccentColor}"
                                 CornerRadius="28"
                                 WidthRequest="32"
                                 HeightRequest="32"
                                 HorizontalOptions="End"
                                 VerticalOptions="Start" />
                </HorizontalStackLayout>

                <Border Margin="120"
                        Stroke="{StaticResource CardStroke}"
                        StrokeThickness="2"
                        BackgroundColor="Transparent">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="28" />
                    </Border.StrokeShape>

                    <ScrollView Orientation="Vertical" VerticalOptions="Fill" HorizontalOptions="Fill">
                        <VerticalStackLayout Spacing="8" Padding="12" BackgroundColor="Transparent">
                            <Image Source="showcaseprofile.png" HeightRequest="250" WidthRequest="250" Margin="0,0,0,8" HorizontalOptions="Center" Aspect="AspectFill">
                                <Image.Clip>
                                    <EllipseGeometry Center="125,125" RadiusX="125" RadiusY="125" />
                                </Image.Clip>
                            </Image>

                            <Label Text="Britney, 27" FontSize="22" FontAttributes="Bold" TextColor="{StaticResource AccentColor}" HorizontalOptions="Start" />
                            <Label Text="Zwolle" FontSize="16" TextColor="{StaticResource AccentColor}" HorizontalOptions="Start" Margin="0,3" />
                            <Label Text="Catan, Chess" FontSize="15" TextColor="{StaticResource AccentColor}" Margin="0,3" HorizontalOptions="Start" />

                            <Border BackgroundColor="#192126" Padding="12" HorizontalOptions="Fill">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="10" />
                                </Border.StrokeShape>
                                <Label Text="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque ut urna volutpat, elementum metus id, bibendum lacus. Cras sodales elit arcu, ut sodales ipsum molestie sit amet. Curabitur commodo non eros in pretium. Fusce ornare purus sodales metus venenatis, at pulvinar erat porta. Vestibulum rhoncus ante sed placerat viverra. Donec finibus tortor eu velit eleifend tincidunt. Suspendisse et mi a neque euismod blandit vitae id justo. Suspendisse fermentum fringilla augue, auctor vulputate arcu pharetra vehicula. Sed porta massa nec finibus viverra. Sed elementum tellus vel lacus vestibulum, eget venenatis enim aliquam."
                                       FontSize="14" TextColor="White" HorizontalOptions="Center" BackgroundColor="Transparent" />
                            </Border>

                            <BoxView HeightRequest="24" BackgroundColor="Transparent" />
                        </VerticalStackLayout>
                    </ScrollView>
                </Border>

                <HorizontalStackLayout Grid.Column="0" Spacing="150" HorizontalOptions="Center" VerticalOptions="End" TranslationY="-90" BackgroundColor="Transparent" InputTransparent="True">
                    <ImageButton Source="dislike.png" BackgroundColor="Transparent" WidthRequest="80" HeightRequest="80" />
                    <ImageButton Source="like.png" BackgroundColor="Transparent" WidthRequest="80" HeightRequest="80" />
                </HorizontalStackLayout>
            </Grid>
        </Border>

    </Grid>
</ContentPage>