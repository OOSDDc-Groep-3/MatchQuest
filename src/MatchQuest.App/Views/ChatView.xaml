<?xml version="1.0" encoding="utf-8" ?>

<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MatchQuest.App.Views.ChatView"
             BackgroundImageSource="background.png"
             BackgroundColor="Transparent">

    <ContentPage.Resources>
        <ResourceDictionary>
            <!-- Colors -->
            <Color x:Key="AccentColor">#C0ffee</Color>
            <Color x:Key="OverlayColor">#E91E1E1E</Color>
            <Color x:Key="SecondaryText">#DADADA</Color>
            <Color x:Key="TimestampColor">#B0B0B0</Color>
            <Color x:Key="CardStroke">#A4D5C7</Color>

            <!-- Sizes -->
            <x:Double x:Key="AvatarSize">48</x:Double>
            <x:Double x:Key="AvatarRadius">24</x:Double>

            <!-- Styles -->
            <Style x:Key="SeparatorStyle" TargetType="BoxView">
                <Setter Property="HeightRequest" Value="1" />
                <Setter Property="BackgroundColor" Value="{StaticResource AccentColor}" />
                <Setter Property="HorizontalOptions" Value="Fill" />
                <Setter Property="Margin" Value="0,6,6,0" />
            </Style>

            <Style x:Key="ContactBorderStyle" TargetType="Border">
                <Setter Property="Margin" Value="0,6,0,0" />
                <Setter Property="Padding" Value="8" />
                <Setter Property="BackgroundColor" Value="Transparent" />
                <Setter Property="StrokeThickness" Value="0" />
            </Style>

            <Style x:Key="NameLabelStyle" TargetType="Label">
                <Setter Property="FontSize" Value="16" />
                <Setter Property="FontAttributes" Value="Bold" />
                <Setter Property="TextColor" Value="{StaticResource AccentColor}" />
            </Style>

            <Style x:Key="PreviewLabelStyle" TargetType="Label">
                <Setter Property="FontSize" Value="13" />
                <Setter Property="TextColor" Value="{StaticResource SecondaryText}" />
                <Setter Property="LineBreakMode" Value="TailTruncation" />
                <Setter Property="MaxLines" Value="1" />
            </Style>

            <Style x:Key="TimestampLabelStyle" TargetType="Label">
                <Setter Property="FontSize" Value="11" />
                <Setter Property="TextColor" Value="{StaticResource TimestampColor}" />
                <Setter Property="HorizontalOptions" Value="End" />
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid RowDefinitions="*" ColumnDefinitions="0.4*,0.8*">

        <!-- Semi-opaque dark overlay -->
        <BoxView Grid.Column="0"
                 Grid.ColumnSpan="2"
                 Color="{StaticResource OverlayColor}"
                 HorizontalOptions="Fill"
                 VerticalOptions="Fill"
                 InputTransparent="True" />

        <!-- Left: Matches list (sidebar) -->
        <Border Grid.Column="0"
                Margin="0"
                BackgroundColor="Transparent"
                Stroke="{StaticResource AccentColor}"
                StrokeThickness="2">
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="0" />
            </Border.StrokeShape>

            <VerticalStackLayout Padding="0" Spacing="0">

                <!-- Header -->
                <HorizontalStackLayout Margin="0,6,30,6" Spacing="-26" VerticalOptions="Center" HorizontalOptions="Center">
                    <Image Source="matchquest.png" WidthRequest="80" HeightRequest="80" />
                    <Label Text="atches"
                           FontSize="32"
                           FontAttributes="Bold"
                           TextColor="{StaticResource AccentColor}"
                           VerticalOptions="Center" />
                </HorizontalStackLayout>

                <!-- Scrollable list -->
                <ScrollView>
                    <VerticalStackLayout Padding="8" Spacing="0" VerticalOptions="FillAndExpand">

                        <!-- Contact: Kees -->
                        <BoxView Style="{StaticResource SeparatorStyle}" Margin="0,0,6,0" />
                        <Border x:Name="KeesButton" Style="{StaticResource ContactBorderStyle}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding OpenMatchCommand}" CommandParameter="Kees" NumberOfTapsRequired="1" />
                            </Border.GestureRecognizers>

                            <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto">
                                <!-- Avatar -->
                                <Image Grid.Column="0"
                                       Source="showcaseprofile.png"
                                       WidthRequest="{StaticResource AvatarSize}"
                                       HeightRequest="{StaticResource AvatarSize}"
                                       Aspect="AspectFill"
                                       VerticalOptions="Center">
                                    <Image.Clip>
                                        <EllipseGeometry Center="24,24" RadiusX="{StaticResource AvatarRadius}" RadiusY="{StaticResource AvatarRadius}" />
                                    </Image.Clip>
                                </Image>

                                <!-- Name and preview -->
                                <VerticalStackLayout Grid.Column="1" Spacing="2" Padding="8,0">
                                    <Label Text="Kees" Style="{StaticResource NameLabelStyle}" />
                                    <Label Text="Looking forward to play..." Style="{StaticResource PreviewLabelStyle}" />
                                </VerticalStackLayout>

                                <!-- Time and status -->
                                <VerticalStackLayout Grid.Column="2" Spacing="6" VerticalOptions="Center" HorizontalOptions="End">
                                    <Label Text="11:42" Style="{StaticResource TimestampLabelStyle}" />
                                    <HorizontalStackLayout Spacing="6" HorizontalOptions="End">
                                        <Border WidthRequest="20" HeightRequest="20" Padding="0" BackgroundColor="{StaticResource AccentColor}" Stroke="#232A34" StrokeThickness="1" HorizontalOptions="Center" VerticalOptions="Center">
                                            <Border.StrokeShape>
                                                <RoundRectangle CornerRadius="10" />
                                            </Border.StrokeShape>
                                            <Label Text="3" FontSize="11" TextColor="Black" HorizontalOptions="Center" VerticalOptions="Center" />
                                        </Border>
                                    </HorizontalStackLayout>
                                </VerticalStackLayout>
                            </Grid>
                        </Border>

                        <BoxView Style="{StaticResource SeparatorStyle}" />

                        <!-- Contact: Britney -->
                        <Border Style="{StaticResource ContactBorderStyle}">
                            <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto">
                                <Image Grid.Column="0"
                                       Source="showcaseprofile.png"
                                       WidthRequest="{StaticResource AvatarSize}"
                                       HeightRequest="{StaticResource AvatarSize}"
                                       Aspect="AspectFill"
                                       >
                                    <Image.Clip>
                                        <EllipseGeometry Center="24,24" RadiusX="{StaticResource AvatarRadius}" RadiusY="{StaticResource AvatarRadius}" />
                                    </Image.Clip>
                                </Image>

                                <VerticalStackLayout Grid.Column="1" Spacing="2" Padding="8,0">
                                    <Label Text="Britney" Style="{StaticResource NameLabelStyle}" />
                                    <Label Text="Hey! Do you have OF?" Style="{StaticResource PreviewLabelStyle}" />
                                    <Label Text="Britney closed the chat" FontSize="10" TextColor="PaleVioletRed" FontAttributes="Bold"/>
                                </VerticalStackLayout>

                                <VerticalStackLayout Grid.Column="2" Spacing="6" VerticalOptions="Center" HorizontalOptions="End">
                                    <Label Text="Yesterday" Style="{StaticResource TimestampLabelStyle}" />
                                    <HorizontalStackLayout Spacing="6" HorizontalOptions="End">
                                        <Border WidthRequest="20" HeightRequest="20" Padding="0" BackgroundColor="{StaticResource AccentColor}" Stroke="#232A34" StrokeThickness="1" HorizontalOptions="Center" VerticalOptions="Center">
                                            <Border.StrokeShape>
                                                <RoundRectangle CornerRadius="10" />
                                            </Border.StrokeShape>
                                            <Label Text="1" FontSize="11" TextColor="Black" HorizontalOptions="Center" VerticalOptions="Center" />
                                        </Border>
                                    </HorizontalStackLayout>
                                </VerticalStackLayout>
                            </Grid>
                        </Border>

                        <BoxView Style="{StaticResource SeparatorStyle}" />

                    </VerticalStackLayout>
                </ScrollView>

                <Picker x:Name="MyMatchesFilter" TextColor="{StaticResource AccentColor}" FontAttributes="Bold" SelectedIndex="0" BackgroundColor="#192126" WidthRequest="220" VerticalOptions="End">
                    <Picker.Items>
                        <x:String>My Matches Filter</x:String>
                        <x:String>New</x:String>
                        <x:String>Favorites</x:String>
                        <x:String>Nearby</x:String>
                        <x:String>Action</x:String>
                        <x:String>Adventure</x:String>
                        <x:String>Action-adventure</x:String>
                        <x:String>Role-playing (RPG)</x:String>
                        <x:String>Shooter (FPS / TPS)</x:String>
                        <x:String>Fighting</x:String>
                        <x:String>Platformer</x:String>
                        <x:String>Strategy (RTS, turn-based, 4X)</x:String>
                        <x:String>Simulation</x:String>
                        <x:String>Sports</x:String>
                        <x:String>Racing</x:String>
                        <x:String>Puzzle</x:String>
                        <x:String>Stealth</x:String>
                        <x:String>Survival</x:String>
                        <x:String>Horror</x:String>
                        <x:String>Sandbox / Open-world</x:String>
                        <x:String>Massively Multiplayer Online (MMO / MMORPG)</x:String>
                        <x:String>Battle Royale</x:String>
                        <x:String>Party / Casual</x:String>
                    </Picker.Items>
                </Picker>

            </VerticalStackLayout>
        </Border>
    </Grid>
</ContentPage>